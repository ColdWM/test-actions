name: Demo - Branching Jobs

on:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  start:
    runs-on: ubuntu-latest
    steps:
      - name: Start
        run: echo "🚀 Workflow 시작"

  branch-success:
    runs-on: ubuntu-latest
    needs: start
    steps:
      - name: 성공하는 Job
        run: |
          echo "✅ 이 Job은 성공합니다"

  branch-failure:
    runs-on: ubuntu-latest
    needs: start
    continue-on-error: true  # ❗ 실패해도 최종 실패 처리 안 함
    steps:
      - name: 실패하는 Job
        run: |
          echo "❌ 일부러 실패"
          exit 1

  final:
    runs-on: ubuntu-latest
    needs: [branch-success, branch-failure]
    if: always()  # 둘 중 하나 실패해도 실행
    steps:
      - name: 마지막 정리
        run: echo "🎉 모든 작업 완료 (실패 포함)"

